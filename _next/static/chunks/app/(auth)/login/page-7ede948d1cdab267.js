(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[665],{6647:function(){},2121:function(e,t,n){Promise.resolve().then(n.bind(n,8541))},8541:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n(7437),a=n(6650),o=n(7970),u=n(9343),i=n(2217),c=n(9099),l=n(9291);let s=(0,c.Ue)((0,l.tJ)(e=>({currentUser:{accessToken:"",tokenType:""},storageCurrentUser:t=>e(e=>({currentUser:{...e.currentUser,...t}})),clearCurrentUser:()=>e(()=>({currentUser:{accessToken:"",tokenType:""}}))}),{name:"currentUser",storage:(0,l.FL)(()=>localStorage)}));var d=()=>{let{storageCurrentUser:e}=s(),{handleSubmit:t,register:n}=(0,u.cI)(),{post:c}=(0,i.ZP)({key:["auth"],method:"POST",url:"auth/login"}),l=async t=>{e(await (null==c?void 0:c.mutateAsync(t)))};return(0,r.jsx)("div",{children:(0,r.jsxs)("form",{onSubmit:t(l),children:[(0,r.jsx)(a.Y,{...n("username")}),(0,r.jsx)(a.Y,{...n("password")}),(0,r.jsx)(o.A,{type:"submit",children:"enviar"})]})})}},2217:function(e,t,n){"use strict";n.d(t,{ZP:function(){return y}});var r=n(932),a=n(5524),o=n(2126),u=n(9930),i=n(2489),c=n(357);u.config();let l=c.env.NEXT_PUBLIC_API,s=()=>{let e={};if(localStorage.getItem("userInfo")){var t;e=JSON.parse(null!==(t=localStorage.getItem("userInfo"))&&void 0!==t?t:"{}")}return{userInfo:e}},d=()=>{var e,t,n,r;return 0===Object.keys(s().userInfo).length?{headers:{Authorization:""}}:{headers:{Authorization:(null===(t=s())||void 0===t?void 0:null===(e=t(s))||void 0===e?void 0:e.tokenType)+(null===(r=s())||void 0===r?void 0:null===(n=r(s))||void 0===n?void 0:n.accessToken)}}},v=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{switch(e){case"GET":return await o.Z.get("".concat(l,"/").concat(t),d()).then(e=>e.data);case"POST":return await o.Z.post("".concat(l,"/").concat(t),n,d()).then(e=>e.data);case"PUT":return await o.Z.put("".concat(l,"/").concat(t),n,d()).then(e=>e.data);case"PATCH":return await o.Z.patch("".concat(l,"/").concat(t),n,d()).then(e=>e.data);case"DELETE":return await o.Z.delete("".concat(l,"/").concat(t),d()).then(e=>e.data)}}catch(e){throw"jwt expired"===((null==e?void 0:e.message)||"Error desconocido, intente m\xe1s tarde")&&(localStorage.removeItem("userInfo"),window.location.reload()),e}};function y(e){let{key:t,method:n,url:o}=e;switch(n){case"GET":return{get:(0,r.a)({queryKey:t,queryFn:()=>v(n,o,{}),retry:0,refetchOnWindowFocus:!0})};case"POST":return{post:(0,a.D)({mutationFn:e=>v(n,o,e),retry:0,mutationKey:t,onMutate:async e=>{await i.E.cancelQueries({queryKey:t});let n=i.E.getQueryData(t);return i.E.setQueryData(t,()=>{var t;return{...n,data:[...null!==(t=null==n?void 0:n.data)&&void 0!==t?t:[],e]}}),{previousObj:n}},onError:(e,n,r)=>{i.E.setQueryData(t,null==r?void 0:r.previousObj)},onSettled:()=>i.E.invalidateQueries({queryKey:t})})};case"PUT":return{put:(0,a.D)({mutationFn:e=>v(n,"".concat(o,"/").concat(null==e?void 0:e.id),e),retry:0,mutationKey:t,onMutate:async e=>{var n;let r=Object.fromEntries(e.entries());await i.E.cancelQueries({queryKey:t});let a=i.E.getQueryData(t),o=null==a?void 0:null===(n=a.data)||void 0===n?void 0:n.find(e=>e.id===r.id),u={...o,...r.data},c=[...null==a?void 0:a.data].filter(e=>e.id!==(null==o?void 0:o.id)).concat(u);return i.E.setQueryData(t,()=>({...a,data:c})),{previousObj:a}},onError:(e,n,r)=>{i.E.setQueryData(t,null==r?void 0:r.previousObj)},onSettled:()=>i.E.invalidateQueries({queryKey:t})})};case"PATCH":return{patch:(0,a.D)({mutationFn:e=>{let t=e;return e instanceof FormData&&(t=Object.fromEntries(e.entries())),v(n,"".concat(o,"/").concat(null==t?void 0:t.id),t)},retry:0,mutationKey:t,onMutate:async e=>{var n;let r=Object.fromEntries(e.entries());await i.E.cancelQueries({queryKey:t});let a=i.E.getQueryData(t),o=null==a?void 0:null===(n=a.data)||void 0===n?void 0:n.find(e=>e.id===r.id),u={...o,...r.data},c=[...null==a?void 0:a.data].filter(e=>e.id!==(null==o?void 0:o.id)).concat(u);return i.E.setQueryData(t,()=>({...a,data:c})),{previousObj:a}},onError:(e,n,r)=>{i.E.setQueryData(t,null==r?void 0:r.previousObj)},onSettled:()=>i.E.invalidateQueries({queryKey:t})})};case"DELETE":return{deleteObj:(0,a.D)({mutationFn:e=>v(n,"".concat(o,"/").concat(e)),retry:0,mutationKey:t,onMutate:async e=>{await i.E.cancelQueries({queryKey:t});let n=i.E.getQueryData(t);return i.E.setQueryData(t,()=>{var t;return{...n,data:[...null!==(t=null==n?void 0:n.data)&&void 0!==t?t:[]].filter(t=>t.id!==e)}}),{previousObj:n}},onError:(e,n,r)=>{i.E.setQueryData(t,null==r?void 0:r.previousObj)},onSettled:()=>i.E.invalidateQueries({queryKey:t})})};default:throw Error("M\xe9todo inv\xe1lido ".concat(n))}}},2489:function(e,t,n){"use strict";n.d(t,{E:function(){return r}});let r=new(n(2443)).S}},function(e){e.O(0,[218,5,563,970,605,300,772,335,648,971,23,744],function(){return e(e.s=2121)}),_N_E=e.O()}]);